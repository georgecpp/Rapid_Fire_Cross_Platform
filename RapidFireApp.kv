#:import utils kivy.utils
#:include RapidFireGame
#:include Target
#:include RapidFireApp

<MenuScreen>:
    player_name_input : player_name_input
    btn_play : btn_play
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: '~~~ Rapid Fire ~~~'
        GridLayout:
            id: grLayout
            cols: 2
            row_force_default: True
            row_default_height: 40
            spacing: 10
            padding: 20
            Label:
                text: 'Player Name: '
            TextInput:
                id: player_name_input

        Button:
            id: btn_play
            text: 'Play'
            disabled: True
            on_press: root.manager.current = 'play'
        Button:
            id: btn_settings
            text: 'Settings'
            on_press: root.manager.current = 'settings'
        Button:
            id: btn_leader
            text: 'Leaderboard'
            on_press: root.manager.current = 'leader'
        Button:
            id: btn_quit
            text: 'Quit'
            on_press: app.stop()

<LeaderScreen>:
    BoxLayout:
        orientation: 'horizontal'
        Label:
            text: 'Welcome to LeaderScreen, here you will see the leaderboard of players!'
        Button:
            text: 'Back to menu'
            on_press: root.manager.current = 'menu'
            size_hint: 0.2,0.2

<SettingsScreen>:
    toggle_music: toggle_music
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Welcome to settings screen, here we will adjust levels difficulty!'
        ToggleButton:
            id: toggle_music
            text: 'Turn the music OFF/ON'
            on_state: root.on_state(self.state)
        Button:
            text: 'Back to menu'
            on_press: root.manager.current = 'menu'


<PlayScreen>:
    rapid_fire_game : rapid_game
    BoxLayout:
        id: mainframe
        orientation: 'vertical'
        height: root.height
        width: root.width
        BoxLayout:
            id: topFrame
            size_hint : (1,0.75)
            canvas:
                Color:
                    rgb: utils.get_color_from_hex('#77b5fe')
                Rectangle:
                    size: self.size
                    pos: self.pos
            RapidFireGame:
                level_up : level_up
                top_frame : topFrame
                main_frame: mainframe
                id: rapid_game
            Label:
                id: level_up
                pos:  root.center
                text: 'You Leveled up!'
                opacity: 0
        AnchorLayout:
            id: bottomFrame
            size_hint : (1,0.25)
            padding: [0,0,180,0]
            anchor_x: 'left'
            anchor_y: 'bottom'
            AnchorLayout:
                anchor_y: 'bottom'
                anchor_x: 'left'
                Label:
                    id: time_label
                    text: 'Time: ' + str(root.rapid_fire_game.timer_val)
                    size_hint: 0.1, 0.1
            AnchorLayout:
                anchor_y: 'bottom'
                anchor_x: 'center'
                Label:
                    id: score_label
                    text: 'Score: ' + str(root.rapid_fire_game.score)
                    size_hint: 0.1, 0.1
            AnchorLayout:
                padding: [0,0,20,0]
                anchor_y: 'bottom'
                anchor_x: 'right'
                Label:
                    id: score_up_label
                    text: 'Score to level up: ' + str(root.rapid_fire_game.score_to_lvl_up)
                    size_hint: 0.1, 0.1

            AnchorLayout:
                padding: [0,0,-175,0]
                anchor_y: 'bottom'
                anchor_x: 'right'
                Button:
                    id: btn_back
                    text: 'Back to menu'
                    size_hint: 0.1, 0.1
                    on_press:
                        root.manager.current = 'menu'
                        root.rapid_fire_game.event.cancel()
                        root.rapid_fire_game.eventTick.cancel()

            AnchorLayout:
                padding: [180,0,0,0]
                anchor_y: 'center'
                anchor_x: 'center'
                Label:
                    id: current_level_label
                    pos_hint: root.center_x, root.center_y
                    text: 'Current level: ' + str(root.rapid_fire_game.curr_level)
                    size_hint: 0.1, 0.1

<Target>:
    canvas:
        Ellipse:
            pos: self.pos
            size: self.size
            source: 'concentric-circles.png'


